        // Search for a specific number on a specific date
        function searchNumber() {
            const searchNumber = numberInput.value.trim();
            const searchDate = dateInput.value;
            const resultsContainer = document.getElementById('numberSearchResults');
        const ui = uiStrings[currentLang];
            if (!searchNumber || !searchDate) {
            resultsContainer.innerHTML = `<div class="bg-red-100 text-red-700 rounded-xl p-6 text-center font-bold result-card">${ui.pleaseEnter}</div>`;
                return;
            }
            // Handle date format - history.json uses YYYY-MM-DD format
            let formattedDate = searchDate;
            if (searchDate.includes('-')) {
                const [yyyy, mm, dd] = searchDate.split('-');
                formattedDate = `${yyyy}-${mm}-${dd}`;  // Keep as YYYY-MM-DD to match history.json
            }
            // Search for the result by date
            const result = historyData.find(r => (r.date === formattedDate || r.date === searchDate));
            if (!result) {
            resultsContainer.innerHTML = `<div class="not-found-card text-white p-6 text-center font-bold result-card">
                <div class="text-xl mb-2">${ui.noResult}</div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center mt-6">
                    <a href="index.html" class="inline-block action-btn back-home-btn text-white font-bold py-3 px-8 rounded-xl transition">${ui.backToHome}</a>
                </div>
            </div>`;
                return;
            }
            // Normalize the search number for comparison (remove spaces and convert to lowercase)
            const searchLower = searchNumber.replace(/\s+/g, '').toLowerCase();
            const winPrizes = [];
            // Search through all prizes for the matching number
            (result.prizes || []).forEach(prize => {
                (prize.winners || []).forEach(num => {
                    // Normalize the winner number for comparison (remove spaces and convert to lowercase)
                    const numClean = num.replace(/\s+/g, '').toLowerCase();
                    // Check for matches with more precise matching strategies:
                    let isMatch = false;
                    
                    // Exact match - most precise
                    if (numClean === searchLower) {
                        isMatch = true;
                    }
                    // For partial matches, be more restrictive:
                    // Only match if the search term is at the end of the number (for lottery number patterns)
                    else if (searchLower.length >= 4 && numClean.length > searchLower.length) {
                        // Check if search term matches the end of the number (common in lottery patterns)
                        if (numClean.endsWith(searchLower)) {
                            isMatch = true;
                        }
                        // Special case for full ticket numbers like "PM 162584"
                        else if (searchLower.includes(numClean) && Math.abs(searchLower.length - numClean.length) <= 3) {
                            // Only match if the lengths are close (to avoid matching short numbers in long ones)
                            isMatch = true;
                        }
                    }
                    // Special case for lottery numbers - match last 6 digits exactly
                    else if (searchLower.length === 6 && numClean.length >= 6) {
                        const numLast6 = numClean.slice(-6);
                        if (searchLower === numLast6) {
                            isMatch = true;
                        }
                    }
                    
                    if (isMatch) {
                        winPrizes.push({
                            prize: prize.label,
                            amount: prize.amount,
                            number: num
                        });
                    }
                });
            });
            // Get the result file for linking to full results
            let resultFile = result.filename;
            if (!resultFile && result.lottery && result.draw && result.date) {
                let dd, mm, yyyy;
                if (result.date.includes('/')) {
                    [dd, mm, yyyy] = result.date.split('/');
                } else if (result.date.includes('-')) {
                    [yyyy, mm, dd] = result.date.split('-');
                }
                const drawStr = String(result.draw).padStart(2, '0');
                if (result.lottery && drawStr && yyyy && mm && dd) {
                    resultFile = `${result.lottery}-${drawStr}-${yyyy}-${mm}-${dd}.json`;
                } else {
                    resultFile = '';
                }
            }
            // Generate the results HTML
            let resultHtml = '';
            if (winPrizes.length > 0) {
                resultHtml = `
                <div class="winner-card text-white p-6 text-center font-bold mb-6">
                    <div class="text-2xl mb-2">${ui.winner(winPrizes.length)}</div>
                    <div class="text-lg">Congratulations on your win!</div>
                </div>
                ${winPrizes.map(win => `
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6 w-full flex flex-col items-center border-2 border-green-200 result-card">
                        <div class="text-xl font-bold text-green-700 mb-3">${win.prize}</div>
                        <div class="mb-2"><span class="font-semibold text-gray-700">${ui.number}</span> <span class="text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded-lg">${win.number}</span></div>
                        <div class="mb-2"><span class="font-semibold text-gray-700">${ui.prize}</span> <span class="text-green-700 font-bold text-xl">â‚¹${win.amount.toLocaleString()}</span></div>
                        <div class="mb-4"><span class="font-semibold text-gray-700">${ui.date}</span> <span class="text-gray-700">${result.date}</span></div>
                        <a href="result.html?file=${resultFile}" target="_blank" class="mt-2 action-btn view-result-btn text-white font-bold py-3 px-8 rounded-xl transition">${ui.viewFullResult}</a>
                    </div>
                `).join('')}
                `;
            } else {
                resultHtml = `
                <div class="not-found-card text-white p-6 text-center font-bold mb-6">
                    <div class="text-xl mb-2">No Winning Numbers Found</div>
                    <div class="text-lg">Better luck next time!</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center result-card">
                    <div class="text-red-700 font-semibold mb-4">
                        ${ui.notFound(searchNumber)}
                    </div>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mt-4">
                        <a href="result.html?file=${resultFile}" target="_blank" class="action-btn view-result-btn text-white font-bold py-3 px-8 rounded-xl transition">${ui.viewFullResult}</a>
                        <a href="index.html" class="action-btn back-home-btn text-white font-bold py-3 px-8 rounded-xl transition">${ui.backToHome}</a>
                    </div>
                </div>
                `;
            }
            resultsContainer.innerHTML = resultHtml;
        }
