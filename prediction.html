<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lucky Number Prediction</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    :root {
      --primary: #2563eb;
      --accent: #7ecbff;
      --bg: #f3f6fb;
      --glass: rgba(255,255,255,0.7);
      --card-bg: rgba(35,41,70,0.92);
      --card-fg: #fff;
      --nav-bg: #fff;
      --nav-active: #2563eb;
      --nav-inactive: #6b7280;
      --nav-shadow: 0 -2px 12px rgba(30,60,120,0.08);
      --border-radius: 18px;
      --shadow: 0 8px 32px rgba(30,60,120,0.13);
      --number-bg: linear-gradient(135deg, #7ecbff 0%, #2563eb 100%);
      --number-cold-bg: linear-gradient(135deg, #636e72 0%, #b2bec3 100%);
      --number-hot-bg: linear-gradient(135deg, #ffb347 0%, #ff6f61 100%);
    }
    html, body {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      color: #232946;
      min-height: 100vh;
      box-sizing: border-box;
    }
    .header {
      background: linear-gradient(90deg, #1a2980 0%, #2575fc 100%);
      color: #fff;
      padding: 18px 0 10px 0;
      text-align: center;
      font-size: 1.5em;
      font-weight: 600;
      letter-spacing: 1px;
      position: relative;
      box-shadow: 0 2px 8px rgba(30,60,120,0.08);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5em;
    }
    .header .back-btn {
      position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
      background: none; border: none; color: #fff; font-size: 1.3em;
      cursor: pointer; display: block;
    }
    .header .lang-icon-btn {
      position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
      background: none; border: none; font-size: 1.5em; color: #fff;
      cursor: pointer; padding: 2px 8px 2px 2px; border-radius: 6px;
      transition: background 0.2s;
    }
    .lang-popup {
      display: none; position: fixed; top: 56px; right: 12px; z-index: 200;
      background: #fff; border-radius: 16px; box-shadow: 0 4px 24px rgba(30,60,120,0.13);
      padding: 18px 24px 12px 24px; min-width: 180px; animation: fadeIn 0.2s;
    }
    .lang-popup.active { display: block; }
    .lang-popup-title { font-weight: 700; margin-bottom: 10px; color: var(--primary); font-size: 1.1em; }
    .lang-popup-btn { display: block; width: 100%; background: none; border: none; color: var(--nav-inactive); font-size: 1em; font-weight: 600; text-align: left; padding: 8px 0; border-radius: 6px; cursor: pointer; transition: background 0.2s, color 0.2s; }
    .lang-popup-btn.active { color: var(--nav-active); background: #e0e7ff; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .main-content {
      max-width: 700px; margin: 0 auto; padding: 32px 12px 90px 12px;
      display: flex; flex-direction: column; align-items: center;
    }
    .glass-card {
      background: var(--glass);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 32px 24px 24px 24px;
      margin-bottom: 32px;
      width: 100%;
      display: flex; flex-direction: column; align-items: center;
      backdrop-filter: blur(8px);
      border: 1.5px solid #e0e7ff;
      transition: box-shadow 0.2s;
    }
    .glass-card h2 {
      margin: 0 0 18px 0;
      font-size: 1.3em;
      color: var(--primary);
      text-align: center;
      letter-spacing: 1px;
    }
    .predict-btn-row {
      display: flex; gap: 10px; justify-content: center; margin-bottom: 18px; flex-wrap: wrap;
    }
    .lucky-btn {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      color: #fff;
      border: none;
      border-radius: 12px;
      font-size: 1.15em;
      font-weight: 700;
      padding: 14px 32px;
      margin: 0 0 8px 0;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.13);
      transition: background 0.2s, box-shadow 0.2s, transform 0.15s;
    }
    .lucky-btn:active { transform: scale(0.97); }
    .number-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      gap: 18px 14px;
      width: 100%;
      margin: 18px 0 0 0;
      justify-items: center;
    }
    .big-number {
      background: var(--number-bg);
      color: #fff;
      font-size: 2.6em;
      font-weight: 900;
      border-radius: 18px;
      padding: 24px 0;
      margin: 0 0 18px 0;
      box-shadow: 0 4px 24px #2563eb22;
      text-align: center;
      letter-spacing: 4px;
      width: 100%;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      user-select: all;
      cursor: pointer;
      animation: popBig 0.7s cubic-bezier(.23,1.5,.32,1);
    }
    @keyframes popBig {
      0% { transform: scale(0.7); opacity: 0.2; }
      60% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    .number-badge {
      background: var(--number-bg);
      color: #fff;
      font-size: 1.6em;
      font-weight: 700;
      border-radius: 12px;
      padding: 16px 0;
      width: 100%;
      text-align: center;
      letter-spacing: 2px;
      box-shadow: 0 2px 8px #2563eb22;
      margin-bottom: 0;
      user-select: all;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      animation: popSmall 0.5s cubic-bezier(.23,1.5,.32,1);
    }
    .number-badge.hot { background: var(--number-hot-bg); }
    .number-badge.cold { background: var(--number-cold-bg); }
    @keyframes popSmall {
      0% { transform: scale(0.7); opacity: 0.2; }
      60% { transform: scale(1.15); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    .number-label {
      font-size: 1.08em;
      color: #2563eb;
      font-weight: 700;
      margin: 18px 0 6px 0;
      text-align: left;
      width: 100%;
    }
    .recent-draws {
      width: 100%;
      margin-top: 18px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      justify-content: center;
    }
    .recent-draw-badge {
      background: linear-gradient(90deg, #e9edf5 0%, #dbeafe 100%);
      color: #232946;
      border-radius: 16px;
      padding: 18px 20px 14px 20px;
      font-size: 1.13em;
      font-weight: 600;
      box-shadow: 0 2px 12px rgba(37,99,235,0.10);
      margin-bottom: 0;
      letter-spacing: 1px;
      transition: background 0.2s, color 0.2s;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      border-left: 6px solid #2563eb;
    }
    .recent-draw-badge .draw-date {
      color: #2563eb;
      font-size: 1.08em;
      font-weight: 800;
      margin-bottom: 6px;
      letter-spacing: 1px;
    }
    .recent-draw-badge .draw-label {
      font-size: 0.98em;
      color: #6b7280;
      font-weight: 700;
      margin-right: 8px;
    }
    .recent-draw-badge .draw-numbers {
      font-size: 1.08em;
      color: #232946;
      font-weight: 600;
      margin-bottom: 2px;
      margin-left: 4px;
    }
    @media (max-width: 600px) {
      .recent-draw-badge { font-size: 1em; padding: 12px 8px 10px 12px; }
      .recent-draw-badge .draw-date { font-size: 1em; }
    }
    .bottom-panel {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100vw;
      background: #181f36;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 8px 0 4px 0;
      box-shadow: 0 -2px 12px rgba(0,0,0,0.13);
      z-index: 200;
    }
    .icon-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #7ecbff !important;
      font-size: 0.98em;
      font-weight: 600;
      cursor: pointer;
      transition: color 0.18s;
      text-decoration: none !important;
      border: none;
      background: none;
      outline: none;
    }
    .icon-btn .material-icons {
      margin-bottom: 2px;
      font-size: 28px;
      line-height: 28px;
    }
    .icon-btn span {
      font-size: 0.93em;
      margin-top: 1px;
    }
    .icon-btn:hover, .icon-btn.active {
      color: #fff !important;
      text-decoration: none !important;
    }
    @media (max-width: 900px) {
      .main-content { max-width: 99vw; }
      .number-grid { grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); }
    }
    @media (max-width: 600px) {
      .main-content { padding-bottom: 80px; }
      .glass-card { padding: 18px 6px 16px 6px; }
      .number-grid { gap: 10px 6px; }
      .big-number { font-size: 2em; padding: 16px 0; }
      .number-badge { font-size: 1.1em; padding: 10px 0; }
    }
    body { padding-bottom: 60px !important; }
  </style>
</head>
<body>
  <div class="header has-back">
    <button class="back-btn" onclick="goBack()" title="Back">‚Üê</button>
    <span id="header-title">Lucky Number Prediction</span>
    <button class="lang-icon-btn" id="langIconBtn" title="Change language">üåê</button>
    <div class="lang-popup" id="langPopup">
      <div class="lang-popup-title">Select Language</div>
      <button class="lang-popup-btn" data-lang="en">English</button>
      <button class="lang-popup-btn" data-lang="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
      <button class="lang-popup-btn" data-lang="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
    </div>
  </div>
  <div class="main-content">
    <div class="glass-card">
      <h2 id="luckyTitle">Generate Your Lucky Number</h2>
      <div class="predict-btn-row">
        <button class="lucky-btn" id="hotBtn">üî• Hot</button>
        <button class="lucky-btn" id="coldBtn">‚ùÑÔ∏è Cold</button>
        <button class="lucky-btn" id="randomBtn">üé≤ Random</button>
      </div>
      <div class="number-label" id="numberLabel">Tap a button to see predictions</div>
      <div class="big-number" id="bigNumber" style="display:none;"></div>
      <div class="number-grid" id="numberGrid"></div>
      <div class="number-label" id="numberLabel6" style="display:none; margin-top:24px;"></div>
      <div class="number-grid" id="numberGrid6" style="display:none;"></div>
    </div>
    <div class="glass-card" id="recentCard" style="margin-bottom:24px;">
      <h2 style="margin-bottom: 10px; font-size: 1.08em; display: flex; align-items: center; gap: 0.5em;">
        <span style="font-size:1.2em;">üïë</span> Recent Draws
        <button id="toggleRecentBtn" style="margin-left:auto; background:none; border:none; color:#2563eb; font-size:1.1em; cursor:pointer;">Show</button>
      </h2>
      <div class="recent-draws" id="recentDraws" style="display:none;"></div>
    </div>
    <div class="glass-card ai-features-card" style="margin-bottom: 24px;">
      <h2 style="margin-bottom: 10px; font-size: 1.13em; display: flex; align-items: center; gap: 0.5em;">
        <span style="font-size:1.2em;">ü§ñ</span> AI-powered Lucky Number Methods
      </h2>
      <div class="ai-features-list" style="width:100%; margin-bottom: 10px; display: flex; flex-wrap: wrap; gap: 10px 18px; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: 0.6em; font-size:1.08em; min-width: 140px;"><span style="font-size:1.2em;">üåü</span> <b>Astrological Analysis</b></div>
        <div style="display: flex; align-items: center; gap: 0.6em; font-size:1.08em; min-width: 140px;"><span style="font-size:1.2em;">üìä</span> <b>Historical Patterns</b></div>
        <div style="display: flex; align-items: center; gap: 0.6em; font-size:1.08em; min-width: 140px;"><span style="font-size:1.2em;">üéØ</span> <b>Random Generation</b></div>
        <div style="display: flex; align-items: center; gap: 0.6em; font-size:1.08em; min-width: 140px;"><span style="font-size:1.2em;">üî•</span> <b>Hot/Cold Numbers</b></div>
      </div>
      <div class="ai-how-it-works" style="font-size:0.98em; color:#232946; background:rgba(255,255,255,0.55); border-radius:10px; padding:10px 14px; margin-bottom:10px;">
        <b>üí° How it works:</b><br>
        <span style="display:block; margin:6px 0 0 0;">üåü <b>Astrological Analysis:</b> Uses current planetary positions and lunar phases</span><br>
        <span style="display:block; margin:6px 0 0 0;">üìä <b>Historical Patterns:</b> Analyzes past winning numbers and frequency</span><br>
        <span style="display:block; margin:6px 0 0 0;">üéØ <b>Random Generation:</b> Uses advanced algorithms for number generation</span><br>
        <span style="display:block; margin:6px 0 0 0;">üî• <b>Hot/Cold Numbers:</b> Considers frequently and rarely drawn numbers</span>
      </div>
      <div class="ai-disclaimer" style="font-size:0.93em; color:#b91c1c; background:rgba(255,255,255,0.45); border-radius:8px; padding:8px 12px; margin-bottom:8px;">
        ‚ö†Ô∏è <b>Disclaimer:</b> This is for entertainment purposes only. No guarantee of winning.
      </div>
    </div>
  </div>
  <nav class="bottom-panel">
    <a class="icon-btn" href="index.html">
      <span class="material-icons">home</span>
      <span>Home</span>
    </a>
    <a class="icon-btn" href="prediction.html">
      <span class="material-icons">star</span>
      <span>Lucky</span>
    </a>
    <a class="icon-btn" href="search.html">
      <span class="material-icons">search</span>
      <span>Search</span>
    </a>
    <a class="icon-btn" href="scanner.html">
      <span class="material-icons">qr_code_scanner</span>
      <span>Scanner</span>
    </a>
  </nav>
  <script>
    // Language logic (same as index.html)
    const langIconBtn = document.getElementById('langIconBtn');
    const langPopup = document.getElementById('langPopup');
    const langPopupBtns = langPopup.querySelectorAll('.lang-popup-btn');
    let currentLang = localStorage.getItem('lang') || 'en';
    function setLang(lang) {
      currentLang = lang;
      localStorage.setItem('lang', lang);
      updateHeaderTitle();
      document.getElementById('luckyTitle').textContent = luckyTitleStrings[lang] || luckyTitleStrings['en'];
      langPopupBtns.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-lang') === lang));
    }
    function updateHeaderTitle() {
      const w = window.innerWidth;
      if (w < 400) {
        document.getElementById('header-title').textContent = langStringsShort[currentLang] || langStringsShort['en'];
      } else {
        document.getElementById('header-title').textContent = langStrings[currentLang] || langStrings['en'];
      }
    }
    window.addEventListener('resize', updateHeaderTitle);
    langIconBtn.addEventListener('click', function() {
      langPopup.classList.toggle('active');
    });
    document.body.addEventListener('click', function(e) {
      if (!langPopup.contains(e.target) && e.target !== langIconBtn) {
        langPopup.classList.remove('active');
      }
    });
    langPopupBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        setLang(this.getAttribute('data-lang'));
        langPopup.classList.remove('active');
      });
    });
    // Language strings
    const langStrings = {
      en: 'Lucky Number Prediction',
      ml: '‡¥≠‡¥æ‡¥ó‡µç‡¥Ø‡¥∏‡¥Ç‡¥ñ‡µç‡¥Ø ‡¥™‡µç‡¥∞‡¥µ‡¥ö‡¥®‡¥Ç',
      ta: '‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æ∑‡Øç‡Æü ‡Æé‡Æ£‡Øç ‡Æï‡Æ£‡Æø‡Æ™‡Øç‡Æ™‡ØÅ'
    };
    const langStringsShort = {
      en: 'Lucky',
      ml: '‡¥≠‡¥æ‡¥ó‡µç‡¥Ø‡¥Ç',
      ta: '‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æ∑‡Øç‡Æü‡ÆÆ‡Øç'
    };
    const luckyTitleStrings = {
      en: 'Generate Your Lucky Number',
      ml: '‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥≠‡¥æ‡¥ó‡µç‡¥Ø‡¥∏‡¥Ç‡¥ñ‡µç‡¥Ø ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µÇ',
      ta: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ§‡Æø‡Æ∞‡Øç‡Æ∑‡Øç‡Æü ‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç'
    };
    document.addEventListener('DOMContentLoaded', function() {
      setLang(currentLang);
      updateHeaderTitle();
    });
    function goBack() {
      window.history.length > 1 ? window.history.back() : window.location.href = 'index.html';
    }
    // --- Prediction Logic ---
    let historyData = [];
    let freq4 = {}, freq6 = {}, all4 = [], all6 = [], lastDraws = [];
    const bigNumber = document.getElementById('bigNumber');
    const numberGrid = document.getElementById('numberGrid');
    const numberLabel = document.getElementById('numberLabel');
    const numberLabel6 = document.getElementById('numberLabel6');
    const numberGrid6 = document.getElementById('numberGrid6');
    const recentDraws = document.getElementById('recentDraws');
    const recentCard = document.getElementById('recentCard');
    const toggleRecentBtn = document.getElementById('toggleRecentBtn');
    // Load history.json
    fetch('history.json')
      .then(res => res.json())
      .then(data => {
        historyData = data;
        analyzeHistory();
        renderRecentDraws();
      })
      .catch(() => {
        numberLabel.textContent = 'Failed to load history data.';
      });
    function analyzeHistory() {
      freq4 = {}; freq6 = {}; all4 = []; all6 = []; lastDraws = [];
      historyData.forEach(draw => {
        (draw.numbers4 || []).forEach(n => {
          freq4[n] = (freq4[n]||0)+1; all4.push(n);
        });
        (draw.numbers6 || []).forEach(n => {
          freq6[n] = (freq6[n]||0)+1; all6.push(n);
        });
        lastDraws.push({date: draw.date, numbers4: draw.numbers4, numbers6: draw.numbers6});
      });
    }
    function getHotNumbers(freq, count=24) {
      return Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,count).map(x=>x[0]);
    }
    function getColdNumbers(freq, count=24) {
      return Object.entries(freq).sort((a,b)=>a[1]-b[1]).slice(0,count).map(x=>x[0]);
    }
    function getRandomNumbers(arr, count=24) {
      const shuffled = arr.slice().sort(()=>Math.random()-0.5);
      return shuffled.slice(0,count);
    }
    function showNumbers(type) {
      bigNumber.style.display = 'none';
      numberGrid.innerHTML = '';
      numberLabel6.style.display = 'none';
      numberGrid6.style.display = 'none';
      let nums = [];
      let label = '';
      let badgeClass = '';
      let nums6 = [];
      let label6 = '';
      let badgeClass6 = '';
      if (type === 'hot') {
        nums = getHotNumbers(freq4, 24);
        label = 'üî• Hot 4-digit numbers';
        badgeClass = 'hot';
        nums6 = getHotNumbers(freq6, 12);
        label6 = 'üî• Hot 6-digit numbers';
        badgeClass6 = 'hot';
      } else if (type === 'cold') {
        nums = getColdNumbers(freq4, 24);
        label = '‚ùÑÔ∏è Cold 4-digit numbers';
        badgeClass = 'cold';
        nums6 = getColdNumbers(freq6, 12);
        label6 = '‚ùÑÔ∏è Cold 6-digit numbers';
        badgeClass6 = 'cold';
      } else {
        nums = getRandomNumbers(all4, 24);
        label = 'üé≤ Random 4-digit numbers';
        badgeClass = '';
        nums6 = getRandomNumbers(all6, 12);
        label6 = 'üé≤ Random 6-digit numbers';
        badgeClass6 = '';
      }
      numberLabel.textContent = label;
      nums.forEach((n, i) => {
        const div = document.createElement('div');
        div.className = 'number-badge ' + badgeClass;
        div.textContent = n;
        div.title = 'Tap to copy';
        div.onclick = function() {
          navigator.clipboard.writeText(n);
          div.style.background = 'linear-gradient(135deg,#10b981 0%,#2563eb 100%)';
          setTimeout(()=>div.style.background='', 600);
        };
        numberGrid.appendChild(div);
      });
      if (nums.length > 0) {
        bigNumber.textContent = nums[0];
        bigNumber.style.display = 'block';
        bigNumber.onclick = function() {
          navigator.clipboard.writeText(nums[0]);
          bigNumber.style.background = 'linear-gradient(135deg,#10b981 0%,#2563eb 100%)';
          setTimeout(()=>bigNumber.style.background='', 600);
        };
      }
      // Show 6-digit numbers below
      if (nums6.length > 0) {
        numberLabel6.textContent = label6;
        numberLabel6.style.display = 'block';
        numberGrid6.innerHTML = '';
        numberGrid6.style.display = 'grid';
        nums6.forEach((n, i) => {
          const div = document.createElement('div');
          div.className = 'number-badge ' + badgeClass6;
          div.textContent = n;
          div.title = 'Tap to copy';
          div.onclick = function() {
            navigator.clipboard.writeText(n);
            div.style.background = 'linear-gradient(135deg,#10b981 0%,#2563eb 100%)';
            setTimeout(()=>div.style.background='', 600);
          };
          numberGrid6.appendChild(div);
        });
      }
    }
    document.getElementById('hotBtn').onclick = function() { showNumbers('hot'); };
    document.getElementById('coldBtn').onclick = function() { showNumbers('cold'); };
    document.getElementById('randomBtn').onclick = function() { showNumbers('random'); };
    function renderRecentDraws() {
      recentDraws.innerHTML = '';
      if (lastDraws.length === 0) {
        recentDraws.innerHTML = '<div style="color:#b91c1c;">No recent draws found.</div>';
        return;
      }
      lastDraws.slice(-5).reverse().forEach(draw => {
        const div = document.createElement('div');
        div.className = 'recent-draw-badge';
        div.innerHTML = `<div class='draw-date'>${draw.date}</div><div><span class='draw-label'>4d:</span><span class='draw-numbers'>${draw.numbers4.slice(0,6).join(', ')}</span></div><div><span class='draw-label'>6d:</span><span class='draw-numbers'>${draw.numbers6.slice(0,3).join(', ')}</span></div>`;
        recentDraws.appendChild(div);
      });
    }
    // Collapsible recent draws
    let recentOpen = false;
    toggleRecentBtn.onclick = function() {
      recentOpen = !recentOpen;
      if (recentOpen) {
        renderRecentDraws();
        recentDraws.style.display = '';
        toggleRecentBtn.textContent = 'Hide';
      } else {
        recentDraws.style.display = 'none';
        toggleRecentBtn.textContent = 'Show';
      }
    };
  </script>
</body>
</html> 